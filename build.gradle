plugins {
  id 'java'
}

java {
  toolchain {
    languageVersion = JavaLanguageVersion.of(8) // компилируем под Java 8
  }
  withSourcesJar() // ВАЖНО: это внутри java{}, но ВНЕ toolchain{}
}

repositories {
  mavenLocal()
  mavenCentral()
  maven { url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/' }
  maven { url 'https://oss.sonatype.org/content/repositories/snapshots/' }
}

dependencies {
  compileOnly 'org.spigotmc:spigot-api:1.12.2-R0.1-SNAPSHOT'
  compileOnly 'org.spigotmc:spigot-api:1.16.5-R0.1-SNAPSHOT'
}

tasks.processResources {
  filteringCharset = 'UTF-8'
}

jar {
  manifest {
    attributes(
            'Implementation-Title': 'OptiFoundry',
            'Implementation-Version': project.version ?: '0.3.2'
    )
  }
}
